/*____________________________________________________________________________	Copyright (C) 1997 Network Associates, Inc. and its affiliates.	All rights reserved.				$Id: CemailerCloseWindowPatch.cp,v 1.3.8.1 1998/11/12 03:07:38 heller Exp $____________________________________________________________________________*/#include <UDrawingState.h>#include <LGrafPortView.h>#include "StSaveCurResFile.h"#include "CemailerCloseWindowPatch.h"CemailerCloseWindowPatch::CemailerCloseWindowPatch(	SGlobals &	inGlobals)		: mGlobals(inGlobals){}CemailerCloseWindowPatch::~CemailerCloseWindowPatch(){}	voidCemailerCloseWindowPatch::NewCloseWindow(	WindowRef			theWindow){	try {		ArrayIndexT	theIndex = mGlobals.windowRefArray.FetchIndexOfWindowRef(														theWindow);		// Remove the SwindowRef		if (theIndex != LArray::index_Bad) {			StSaveCurResFile	saveResFile;				StColorPortState	savePortState(theWindow);			SWindowRef			theItem;			if (mGlobals.windowRefArray.FetchSWindowRefAt(			theIndex, theItem)) {				delete theItem.grafPortView;								mGlobals.windowRefArray.RemoveSWindowRefAt(theIndex);			}		}	}		catch (...) {	}		OldCloseWindow(theWindow);}