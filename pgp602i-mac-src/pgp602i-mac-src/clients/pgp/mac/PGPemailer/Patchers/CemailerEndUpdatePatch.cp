/*____________________________________________________________________________	Copyright (C) 1997 Network Associates, Inc. and its affiliates.	All rights reserved.				$Id: CemailerEndUpdatePatch.cp,v 1.3.8.1 1998/11/12 03:07:39 heller Exp $____________________________________________________________________________*/#include <UDrawingState.h>#include <LGrafPortView.h>#include "StSaveCurResFile.h"#include "CemailerEndUpdatePatch.h"CemailerEndUpdatePatch::CemailerEndUpdatePatch(	SGlobals &	inGlobals)		: mGlobals(inGlobals){}CemailerEndUpdatePatch::~CemailerEndUpdatePatch(){}	voidCemailerEndUpdatePatch::NewEndUpdate(	WindowRef			theWindow){	try {		ArrayIndexT	theIndex = mGlobals.windowRefArray.FetchIndexOfWindowRef(														theWindow);		// Redraw the GrafPortView		if (theIndex != LArray::index_Bad) {			StSaveCurResFile	saveResFile;				StColorPortState	savePortState(theWindow);			SWindowRef			theItem;			if (mGlobals.windowRefArray.FetchSWindowRefAt(			theIndex, theItem)) {				LFile	thePlugFile(mGlobals.plugSpec);								thePlugFile.OpenResourceFork(fsRdPerm);				theItem.grafPortView->Draw(nil);				thePlugFile.CloseResourceFork();			}		}	}		catch (...) {	}		OldEndUpdate(theWindow);}