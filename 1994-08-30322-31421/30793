Newsgroups: sci.crypt
Path: msuinfo!agate!howland.reston.ans.net!europa.eng.gtefsd.com!sundog.tiac.net!news.sprintlink.net!news.dorsai.org!stevalln
From: stevalln@dorsai.org (Steve_Allen)
Subject: My hardware RNG, revised
Message-ID: <CuI5x5.2Er@dorsai.org>
Organization: The Dorsai Embassy, New York, NY
X-Newsreader: TIN [version 1.2 PL2]
Date: Sun, 14 Aug 1994 02:07:52 GMT
Lines: 53

   Here's a summary of my revised 2-oscillator Random Number
Generator as it now stands:
   My power supply is now a 9-volt DC source from a Radio Shack
wall xformer.  (This replaces a noisy 5-volt switching power
supply.) It feeds a reverse-biased emitter-base transistor junction
that puts out about 10mV of noise. That's amplified and low-pass
filtered (5KHz corner, 2-pole) and amplified to clipping. That
clipped signal goes to a comparator that cleans up the signal and
limits it to 5V. This is a very random, jittery signal! When fed to
a frequency counter with 1-second gate time I get ~4700 Hz. This is
my low-frequency oscillator.
   The high-frequency oscillator is now a 150KHz RC oscillator made
from 2 gates of a 74HC00 quad Nand package. (I decided that the
3.579545MHz crystal oscillator was too fast for 4000-series cmos
running at 5 volts.)
   Another gate combines the noise signal and the 150KHz signal to
make a randomly interrupted 150KHz signal.
   The microcontroller, a PIC 16C84 can gate this signal via the
final Nand gate. This output goes to a 4520 counter.
   Output is taken one bit at a time from the divide-by-4 output of
this counter.  The PIC takes a bit every 4.096 milliseconds. As
before, to read one bit the PIC does this:
 freezes the counter by putting a low on the Nand gate
 waits 2uS for the input to stabilize
 reads the /4 output of the counter
 unfreezes the counter.

 Throughput is about 250 bits/second.

   Output is to a 40x2 LCD display. Modes include binary, decimal,
hexadecimal, 26 letters, 26 letters plus 10 digits, 52 letters plus
10 digits. Mode is stored in EEPROM and recalled on power-up.
   There's a power switch and a start switch and a mode switch.
   9600-baud serial output will probably come in the near future.

   Possible problems in this generator:
   If the rng output is high when the PIC freezes the counter, the
counter is incremented. I can't see any bias carrying over to the
/4 output of the counter. I'm still thinking about this, however.
   If the lf oscillator spends more than 4mS at any level, it will
bias the generator. I have spent some time examining the lf signal,
and haven't seen any instances of more than 1mS at any level.

   I'm a lot less glib about trusting the output of this generator,
but so far I'm cautiously optimistic-- ones roughly equal zeros,
and I've looked up enough statistics to see that if I sample 1000
bits and have 36 more ones than zeros, that's roughly half as
likely to appear as 500 ones and 500 zeros, i.e., it's OK. Research
continues.  I'm starting to learn more than I thought I'd ever need
to know about distributions....
-Steve
.

