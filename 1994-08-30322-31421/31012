Path: msuinfo!uwm.edu!cs.utexas.edu!not-for-mail
From: ritter@io.com (Terry Ritter)
Newsgroups: sci.crypt
Subject: Noise Experiments
Date: 21 Aug 1994 23:56:03 -0500
Organization: UTexas Mail-to-News Gateway
Lines: 226
Sender: nobody@cs.utexas.edu
Message-ID: <199408220456.XAA28923@pentagon.io.com>
NNTP-Posting-Host: news.cs.utexas.edu

 NOISE EXPERIMENTS

 I recently spent the better part of several nights and days trying
 to see just how easy it really is to generate noise from a reverse-
 biased transistor B-E junction.  I breadboarded several different
 circuits, and measured the amount of noise produced.

 The method does seem practical, but uses a number of parts and
 may require some testing and/or adjustment, because the noise
 depends upon non-guaranteed transistor characteristics.


 Day One

 My first successful circuit was:


             _ V+                  _
             |                     |
             |                     R3
             R1                    |
             |                     +---> V2
          V1 |                     c
             |--------+--R2--+-----b Q2
             e        |      |     e
          +--b Q1     +--C1--+     |
          |  c                     v
          |  |
          v  v


 Both transistors are NPN silicon.

 Q1 pretends to be a zener, and drops current across R1, presumably
 creating noise in the process.  R2 biases Q2, but is so large that
 C1 is needed as a bypass.  R3 is probably not critical.

 A production design would probably bias Q2 with negative feedback
 and just couple the noise in with C1.

 Here are the results for two configurations:


       V+      Q1     R1    V1    R2   C1    Q2    R3   V2     AC

  1/  11.3v  2N5088  100K  6.65v  1M  .22  2N2222  12K  5.0v   56mv
  2/  10.0v  2N2222  100K  7.04v  1M  .22  2N2222  12K  3.2v  168mv


 AC is the RMS noise output.  Note that RMS is the power in the
 noise signal, and not the peak-to-peak voltage, which may be more
 related to what we need for subsequent processing.  56mv RMS seems
 to show an "average" amplitude of about 300mv p-p on the scope.
 Technically, the absolute amplitude exceeds the rms value about 1/3
 of the time, with 5 rms exceeded about 1 time in a million, but
 the scope probably has a much larger bandwidth than the meter.

 If we work out the currents in 1/, Q2 must be running with a beta
 around 88, and if we assume that the small-signal gain is the same,
 we have about 640uv of RMS noise on Q1.  Similarly, /2 shows Q2
 with a beta around 89, and 1.88mv of RMS noise on Q1.

 Is AC really noise?  Removing C1, or connecting it across Q1 had
 no affect on the DC levels, but reduced the AC value to the
 background level of 4mv.  (The RMS meter showed 4mv on the supply.)
 Thus, the circuit was apparently neither oscillating nor collecting
 a significant amount of RF.

 In /2, R1 was changed to 10K and 470K; in both cases the noise was
 drastically reduced.  Apparently there is some optimum current for
 maximum noise.

 Also in /2, Q1 was replaced with several different zener diodes.
 In all cases, the AC noise output dropped to background.  Changing
 R1 to 10K did not seem to help.  It is tempting to think that a
 transistor in "zener connection" is exceptionally noisy, but maybe
 real zeners just need more power.



 Day Two


 A noise source with a self-biasing amp:


             _ V+                    _
             |                       |
             |                       R2
             R1                      |
             |         +--R4--+--R3--+---> V2
             |         |      |      |
             |         |      C2     |
             |         |      |      |
             |         |      v      |
          V1 |         |             c
             |----C1---+-------------b Q2
             e                       e
          +--b Q1                    |
          |  c                       v
          |  |
          v  v


   Both transistors 2N2222


   V+     R1    V1      C1   R2    R3    C2    R4    V2    AC

  10.0v  100K  7.04v  .22uf  12K  100K  10uf  100K  2.1v  168mv


  This gives a very reasonable output, at the expense of no
  automatic biasing for Q1.  On the other hand, the biasing may be
  fairly stable, so this could be a good configuration.


  We can also auto-bias the noise source.  This circuit is very
  similar to one in an article called "Truly Random Numbers" by
  H.R. Bungay and Robert Martin in an early issue of Kilobaud:


                             _ V+
                             |
                             R1
              V1             |
        +------+------R3-----+ V2
        |      |             |
        C1     |             R2
        |      |             |
        v      |             +---> V3
               |             |
               e             c
            Q1 b-------------b Q2
               c             e
               (nc)          |
                             v


   Both transistors are 2N2222.


   V+     R1   R2   R3   C1    V1    V2     V3     AC

  10.0v  12K  15K  68K  10uf  7.53v  7.7v  4.75v  80mv


  Note that this circuit trades off output amplitude for automatic
  biasing.

  The fixed zenering level fixes V1; feedback fixes V2 based on
  V1; R2 serves to move the output voltage nearer to center.

  This particular E-B junction appears to break down about 7v, but
  this is not a guaranteed quantity.  The 2N2222 has a guaranteed
  minimum Vbe of 5v (a common value); I searched around and found
  a 2N1990 with a minimum guaranteed Vbe of 3v, but this particular
  transistor happened to have an even *higher* breakdown.  It would
  be nice to find a "transistor" with a guaranteed low breakdown
  (say 2.5v) and then try to work from a logic level supply, but
  with the present components, a low ripple 9v or higher voltage
  supply seems necessary.


  If 80mv (RMS!) is not enough, we can try a simple amplifier:

                           _ V+
                           |
                           R4
                           |
                    +--R5--+--> V4
                    |      |
                    |      c
     ---C2-----R6---+------b Q3
                    |+     e
                    D1     |
                    |      v
                    v


   Q3 is 2N2222; D1 is a switching diode.


   V+     R4    R5    C2    R6    V4     AC

  10.0v  4.7K  220K  .22uf   0K  4.17v  1.07v


 Now we get peaks virtually to the 0 and 10v extremes.  The
 scope seems to show a bandwidth change, however, so we might
 need to reduce C2 and increase C6, remove D1, or  perhaps even
 use a high-frequency transistor.

 R5 tends to steady the output voltage to a reasonable mid value.


 Alternatives

 One alternative would be to use an op-amp to perform the final
 amplification; possibly it could perform limiting and digital
 conversion as well.

 Of course, if we are going to support one op-amp, we might as well
 support others, and then can eliminate all but the noise-source
 transistor.  Of course the op-amp circuits will have their own
 costs.

 The number of components and the variability of the noise source
 in the reverse-biased junction approach may make the FM IF strip
 idea a very interesting alternative.


 Conclusion

 Several simple circuits can generate really-random noise from a
 reverse-biased transistor B-E junction, and then amplify this noise
 to near usable levels.  Subsequent limiting and then pulse-width
 measurement (for example) would be one way to use this noise to
 generate really random values.


 ---
 Terry Ritter   ritter@io.com



