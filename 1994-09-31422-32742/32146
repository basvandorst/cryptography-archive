Newsgroups: sci.crypt
Path: msuinfo!agate!library.ucla.edu!csulb.edu!csus.edu!netcom.com!jonadams
From: jonadams@netcom.com (Jonathan Adams)
Subject: Re: Speedups in posted RC4 code
Message-ID: <jonadamsCwDKFK.s5@netcom.com>
Organization: NETCOM On-line Communication Services (408 261-4700 guest)
X-Newsreader: TIN [version 1.2 PL1]
References: <35c4aa$l17@bcarh8ab.bnr.ca> <35daff$jvb@news.delphi.com>
Date: Mon, 19 Sep 1994 11:40:32 GMT
Lines: 35

JMKELSEY@DELPHI.COM (jmkelsey@news.delphi.com) wrote:

: Be careful not to replace the swap with a swap macro that won't deal well
: with swapping a byte with itself.  About 1/256 of the swapping is done
: with x and y equal, thus 	
:  
: #define SWAP(x,y) {x^=y;y^=x;x^=y;} 

: winds up giving you an internal state full of zeros.
No, it doesn't. Try the following C code:

#include <stdio.h>

int main(void)
{
    int x,y,z;

    for (z = 0; z < 256; z++) {
        x = y = z;
        x ^= y; y ^= x; x ^= y;
        printf("x = %3i, y = %3i, z = %3i%s|",x,y,z,((z+1)%3 == 0)?"":" ");
    }
    return 0;
}

You'll find that the switch works for every value of x when y==x.

: --John

	Jonathan Adams
-- 
				        jonadams@netcom.com
PGP 2.6 key available. Fingerprint:     (Jonathan Adams)
    40 27 43 E0 5C 20 66 0E  EE 8C 10 9F EC 40 78 6A  (revoked!)
    A5 77 E9 28 88 DD B7 D4  9C 8C F9 D5 D8 3F 45 BE  (new! 1024 bit)

