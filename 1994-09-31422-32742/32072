Path: msuinfo!netnews.upenn.edu!dsinc!spool.mu.edu!howland.reston.ans.net!europa.eng.gtefsd.com!MathWorks.Com!news2.near.net!news.delphi.com!news.delphi.com!not-for-mail
From: jmkelsey@news.delphi.com (JMKELSEY@DELPHI.COM)
Newsgroups: sci.crypt
Subject: Re: Speedups in posted RC4 code
Date: 18 Sep 1994 16:32:41 -0000
Organization: Delphi Internet Services Corporation
Lines: 18
Message-ID: <35hq39$m3t@news.delphi.com>
References: <35c4aa$l17@bcarh8ab.bnr.ca> <35daff$jvb@news.delphi.com>
NNTP-Posting-Host: news.delphi.com

jmkelsey@news.delphi.com (JMKELSEY@DELPHI.COM) writes:


>Be careful not to replace the swap with a swap macro that won't deal well
>with swapping a byte with itself.  About 1/256 of the swapping is done
>with x and y equal, thus 	
> 
>#define SWAP(x,y) {x^=y;y^=x;x^=y;} 

>winds up giving you an internal state full of zeros.

   I got some mail that made me want to clarify this.  The problem with 
the above macro isn't that x and y hold the same value, it's that sometimes
x and y in the macro are actually yhe same variable.  This is going to look
like SWAP(x,x).  In this case, we wind up with x set to zero in the first 
instruction of the macro, and it never recovers.

   --John Kelsey, jmkelsey@delphi.com
