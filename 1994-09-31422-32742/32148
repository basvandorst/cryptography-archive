Newsgroups: sci.crypt
Path: msuinfo!agate!library.ucla.edu!csulb.edu!csus.edu!netcom.com!jonadams
From: jonadams@netcom.com (Jonathan Adams)
Subject: Re: Speedups in posted RC4 code
Message-ID: <jonadamsCwDLFv.1MK@netcom.com>
Organization: NETCOM On-line Communication Services (408 261-4700 guest)
X-Newsreader: TIN [version 1.2 PL1]
References: <35c4aa$l17@bcarh8ab.bnr.ca> <35daff$jvb@news.delphi.com> <jonadamsCwDKFK.s5@netcom.com>
Date: Mon, 19 Sep 1994 12:02:19 GMT
Lines: 30

Jonathan Adams (jonadams@netcom.com) wrote:
: JMKELSEY@DELPHI.COM (jmkelsey@news.delphi.com) wrote:

: : Be careful not to replace the swap with a swap macro that won't deal well
: : with swapping a byte with itself.  About 1/256 of the swapping is done
: : with x and y equal, thus 	
: :  
: : #define SWAP(x,y) {x^=y;y^=x;x^=y;} 

: : winds up giving you an internal state full of zeros.
: No, it doesn't. Try the following C code:

:[snip out source code]

Here's a better thing: a proof that the above macro works:

start with: x = a, y = b

x ^= y		x = a^b, y = b
y ^= x		x = a^b, y = a
x ^= y		x = b, y = a

Thus, it works for any numbers x and y.

	Jonathan Adams
-- 
				        jonadams@netcom.com
PGP 2.6 key available. Fingerprint:     (Jonathan Adams)
    40 27 43 E0 5C 20 66 0E  EE 8C 10 9F EC 40 78 6A  (revoked!)
    A5 77 E9 28 88 DD B7 D4  9C 8C F9 D5 D8 3F 45 BE  (new! 1024 bit)

