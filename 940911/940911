From jefft@netcom.com  Sun Sep 11 19:34:30 1994
Received: from netcom15.netcom.com by scss3.cl.msu.edu (4.1/4.7)  id AA22899; Sun, 11 Sep 94 19:34:30 EDT
Received: by netcom15.netcom.com (8.6.8.1/Netcom)
	id QAA06347; Sun, 11 Sep 1994 16:33:59 -0700
Date: Sun, 11 Sep 1994 16:33:59 -0700
From: jefft@netcom.com (Jeff Thompson)
Message-Id: <199409112333.QAA06347@netcom15.netcom.com>
To: ripem-dev@ripem.msu.edu
Subject: RIPEM 2.0 Beta 2 release


I have sent the files for RIPEM 2.0 Beta 2 to Mark.

The main change is a friendlier RIPEM home directory.  If the user
doesn't specify one, RIPEM uses a default (~/.ripemhome on Unix and
C:\RIPEMHOM on DOS).  And if it doesn't exist, RIPEM creates it.  I
have checked that this works in Borland on DOS and on my Sun 4
account.  I am mostly concerned about TURBO C on the Mac, since I
don't know how to code this.  (Is Richard Outerbridge out there?)
Specifically, the following two code segments are in getsys.c :

#ifdef MACTC
  if (StrCopyAlloc (defaultHomeDir, need a folder named "RIPEM Home" in the
                    system preferences file) == (char *)NULL)
    return (ERROR_MALLOC);
#endif

#ifdef MACTC
    // Note: this needs to be filled in with the correct call
    if (Mac-make-directory-function (*homeDir) == 0) {
      createdHomeDir = TRUE;
#endif

Note that these won't even compile.  I'm hoping someone will come to
the rescue and supply the code while we're still in Beta.

The other change since Beta 1 fixes a problem pointed out by David
Sternlight.  RIPEM for Macintosh didn't like a self-signed certificate
in the Originator-Certificate field, even though it is followed by
Issuer-Certificates which should let it complete the chain.  Therefor,
when creating a message using -M pem, if RIPEM finds exacly one
extended certificate chain for the sender, it skips the self-signed
certificate and puts the certificate for the sender from the issuer
under that chain in the Originator-Certificate field.  This is closer
to the RFC 1422 model (which RIPEM for Macintosh follows) where each
user has a certificate from only one issuer.  However, if RIPEM finds
more that one chain for the sender, it doesn't know which issuer is
preferred and so goes back to putting the self-signed certificate in
the Originator-Certificate field.  Note that to fix this, we would
need another command line option to say "Yes I know that I have gotten
myself certified with more that one certificate chain, but *this*
issuer is the one I really want to be known by."  Maybe in a future
release...

The only other thing I have to say is that the Unix makefile doesn't
build RCERTS now, which is crucial.  It also links to all the RIPEM
library files directly instead of building a seperate RIPEM library
(like RSAREF is a seperate library).  Since I don't totally understand
the layout of the current makefile, I'm hoping someone can work on this.

Thanks,
- Jeff


