Xref: msuinfo alt.security:7952 sci.crypt:9303
Newsgroups: alt.security,sci.crypt
Path: msuinfo!caen!sol.ctr.columbia.edu!startide.ctr.columbia.edu!seth
From: seth@startide.ctr.columbia.edu (Seth Robertson)
Subject: Re: PGP *2.0* available
Organization: Columbia University Center for Telecommunications Research
Message-ID: <1992Sep13.125302.16476@sol.ctr.columbia.edu>
Sender: nobody@ctr.columbia.edu
Date: Sun, 13 Sep 1992 12:53:02 GMT
X-Posted-From: startide.ctr.columbia.edu
X-Posted-Through: sol.ctr.columbia.edu


There appears to be a minor bug in PGP which can cause PGP to
reference element -1 in an array.  When I compiled it with gcc -O on
my Sun, it caused PGP to go into an infinite loop, though of course
anything could happen.

I came across it when, er, satisfying my intellectual curiosity.

The patch is in unified diff format (see the latest version of patch
on prep.ai.mit.edu).

--- config.c~	Sat Sep  5 04:46:51 1992
+++ config.c	Sat Sep 12 15:27:22 1992
@@ -309,9 +309,12 @@
 			}
 		}
 
+
 		/* Skip trailing whitespace and add der terminador */
-		while( ( theCh = inBuffer[ lineBufCount - 1 ] ) == ' ' || theCh == '\t' )
-			lineBufCount--;
+		if (lineBufCount)
+			while( ( theCh = inBuffer[ lineBufCount - 1 ] ) == ' ' || theCh == '\t' )
+				lineBufCount--;
+
 		inBuffer[ lineBufCount ] = '\0';
 
 		/* Process the line unless its a blank or comment line */

