Newsgroups: sci.crypt
Path: msuinfo!agate!howland.reston.ans.net!xlink.net!math.fu-berlin.de!news.dfn.de!news.dkrz.de!rzsun2.informatik.uni-hamburg.de!bontchev
From: bontchev@news.informatik.uni-hamburg.de (Vesselin Bontchev)
Subject: Re: crypto drivers && defraggers
Message-ID: <CEsyz8.7ow@informatik.uni-hamburg.de>
Sender: news@informatik.uni-hamburg.de (Mr. News)
Organization: University of Hamburg, Germany
X-Newsreader: TIN [version 1.1 PL9]
References: <5793@wet.UUCP>
Date: Tue, 12 Oct 1993 21:13:53 GMT
Lines: 68

Peter Davidson (naga@wet.COM) writes:

> ]3) The the defragger wants to read a sector. The crypto driver
> ]intercepts the request, decrypts the sector and passes the decrypted
> ]sector to the defragger.
>  
> How does the crypto driver know whether the sector is actually
> encrypted?  What if it decrypts a sector which has not been encrypted?

The thing I am talking about usually encrypts an area of the disk (a
whole partition or a large file). Then it constantly monitors access
to the sectors of this area and perform encryption on write and
decryption on read. A typical example is the program Diskreet that
comes with Norton Utilties. It is a device driver, which makes a huge
encrypted file to look as a logical drive (much like Stacker does with
compressed volumes).

> Steve seems to be talking about a file encryption program, and
> indeed there's a problem, as he says.  Vesselin seems to be
> talking about a background encryption utility.  Again there's a

Yes.

> problem, since in such a case you sometimes don't want the crypto
> driver active. 

With Driskreet you can tell it not to be mounted at boot time (and
you are not asked to enter the password). Only when you first try to
access the encrypted volume, it asks for the password and mounts the
volume.

> For example, if you're installing a large
> executable then there's no point to encrypting it during
> installation (it's just a waste of time to decrypt it when it's
> run). 

An alternative is to keep the stuff you want encrypted on the
encrypted volume and the non-sensitive stuff on the non-encrypted
volumes, but I agree that this is not very convenient. However, the
encryption of a file doesn't take that much time (I mean, in
Diskreet), even if you have selected DES as your encryption method
(they probably implement it on a sector or cluster basis and in ECB
mode). Using their own encryption method is much faster, but I
wouldn't trust it.

> So a crypto driver that anyone would actually pay money
> for has to allow for deactivation and reactivation under user
> control. 

That's not a problem - Diskreet does it. The problem is to do it on a
per file basis.

> So if the user has deactivated it and forgets to
> reactivate it before defragging then (if using the crypto driver
> described above, which uses sector numbers) he loses all the data
> on his disk.

Only if it works on a per file basis. The driver I am talking about
unmounts the whole encrypted volume when it is disabled, so you cannot
access this volume at all, let alone try to defrag it.

Regards,
Vesselin
--
Vesselin Vladimirov Bontchev          Virus Test Center, University of Hamburg
Tel.:+49-40-54715-224, Fax: +49-40-54715-226      Fachbereich Informatik - AGN
< PGP 2.3 public key available on request. > Vogt-Koelln-Strasse 30, rm. 107 C
e-mail: bontchev@fbihh.informatik.uni-hamburg.de        22527 Hamburg, Germany
