Xref: msuinfo sci.crypt:10847 comp.sys.next.misc:25015
Newsgroups: sci.crypt,comp.sys.next.misc
Path: msuinfo!caen!destroyer!cs.ubc.ca!van-bc!extropia.wimsey.bc.ca!miron
From: miron@extropia.wimsey.bc.ca (Miron Cuperman)
Subject: Re: UNIX Mail with PubKey Encryption
Message-ID: <1992Nov15.064520.9574@extropia.wimsey.bc.ca>
Organization: Immortal Freedom's Deck
References: <LY5SBKVH@cc.swarthmore.edu>
Date: Sun, 15 Nov 1992 06:45:20 GMT
Lines: 57

eoliver@ralph.cs.haverford.edu (Erik Oliver) writes:

>So, I have these very practical questions:
>	What program(s) would you recommend for public key encyption
>		of mail on UNIX systems, especially NeXT, running 3.0?

On the NeXT you can add a couple of terminal services.

Create the following two terminal services:

Encrypt:
	Command: <full-path>/encrypt %p '%s'
	Accept: Plain text
	Use selection: On Cmd Line
	Execution: Background
		   Return output
		   No Shell
Decrypt:
	Command: <full-path>/decrypt '%s'
	Accept: Plain text
	Use selection: On Cmd Line
	Execution: Window
		   New Window
		   No Shell

Here are the corresponding perl scripts (they should be tweaked
based on your local PGP config).  Note that I have "Armor = on" in
my PGP configuration file.  That's means that I can ommit the '-a'
flag to PGP below.  Note also that the standard error for the
encryption process is saved to .pgperr in your home directory.
Now if I could only figure out why the new terminal window doesn't
go away after I am done decrypting.

#!/usr/local/bin/perl
# Encrypt
$home = $ENV{'HOME'};
$ENV{'PGPPATH'}=$home . '/Library/pgp';
$ENV{'PAGER'}=less;
open(OUT,"|pgp -ef $ARGV[0] -o /tmp/encr$$.asc 2> $home/.pgperr");
print OUT $ARGV[1];
close(OUT);
system("cat /tmp/encr$$.asc");
unlink("/tmp/encr$$.asc");


#!/usr/local/bin/perl
# Decrypt
$ENV{'PGPPATH'}=$ENV{'HOME'} . '/Library/pgp';
$ENV{'PAGER'}=less;
open(OUT,"|pgp -dfm");
print OUT $ARGV[0];
close(OUT);
-- 
	Miron Cuperman <miron@extropia.wimsey.com>   | NeXTmail/mime ok
		       <miron@cs.sfu.ca>	     | Public key avail
	AMIX: MCuperman				     |
immortalcybercomputinglaissezfaire		     |
