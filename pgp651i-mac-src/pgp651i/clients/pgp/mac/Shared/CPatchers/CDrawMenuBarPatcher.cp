/*____________________________________________________________________________	Copyright (C) 1997 Network Associates Inc. and affiliated companies.	All rights reserved.				$Id: CDrawMenuBarPatcher.cp,v 1.5 1999/04/02 09:01:03 jason Exp $____________________________________________________________________________*/#include <Traps.h>#include <SetupA4.h>#include "CDrawMenuBarPatcher.h"// Define staticsCDrawMenuBarPatcher *	CDrawMenuBarPatcher::sDrawMenuBarPatcher = nil;CDrawMenuBarPatcher::CDrawMenuBarPatcher(){	// Current version will only install one patch	if (sDrawMenuBarPatcher == nil) {		Patch(_DrawMenuBar, kProcInfo, (ProcPtr) DrawMenuBarCallback);		sDrawMenuBarPatcher = this;	}}CDrawMenuBarPatcher::~CDrawMenuBarPatcher(){}	voidCDrawMenuBarPatcher::NewDrawMenuBar(){	// default just calls through to the original	OldDrawMenuBar();}	voidCDrawMenuBarPatcher::OldDrawMenuBar(){#if TARGET_RT_MAC_CFM	::CallUniversalProc(	mOldRoutine,							kProcInfo);#else	((DrawMenuBarProc) mOldRoutine)();#endif}	pascal voidCDrawMenuBarPatcher::DrawMenuBarCallback(){	EnterCallback();	try {			sDrawMenuBarPatcher->NewDrawMenuBar();	}		catch(...) {	}		ExitCallback();}