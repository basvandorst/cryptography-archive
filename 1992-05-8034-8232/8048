Xref: msuinfo comp.arch:30522 sci.crypt:8048
Path: msuinfo!uchinews!linac!pacific.mps.ohio-state.edu!zaphod.mps.ohio-state.edu!mips!mips!decwrl!pa.dec.com!nntpd2.cxo.dec.com!nntpd.lkg.dec.com!sousa.ltn.dec.com!human.enet.dec.com!supnik
From: supnik@human.enet.dec.com (Bob Supnik)
Newsgroups: comp.arch,sci.crypt
Subject: Re: The NSA Instruction
Keywords: Find-first
Message-ID: <591@sousa.ltn.dec.com>
Date: 30 Apr 92 01:18:45 GMT
References: <29354@hoptoad.uucp>
Sender: newsa@sousa.ltn.dec.com
Followup-To: comp.arch
Organization: Digital Equipment Corporation
Lines: 31


In article <29354@hoptoad.uucp>, gnu@hoptoad.uucp (John Gilmore) writes...
>It occurred to me to wonder just how many architectures have the following
>instructions:
> 
>	Population Count -- tell me how many 1-bits are in this word
> 
>	Find First One (or Zero) -- can speed up emulation
>				    of popcount on machines without it
> 
>I have gotten the impression that the Pop Count instruction has been
>added to more than one architecture upon direct request from the US National
>Security Agency, because it apparently occurs frequently in their inner
>loops, but is slow to emulate in software (table lookup on parts of the word,
>followed by addition of the table entries, seems best to me).
> [more deleted]

PDP-10's (and -20's) had a JFFO - jump if find first one - and VAX's have
a FFS/FFC - find first set/clear.  Both were done to facilitate searching
of bit vectors used as allocation maps for disk or memory blocks.  Neither
had population count, although recent VAX's have had such a facility
at the micro-machine level to facilitate counting the number of registers
saved (and therefore the size of the stack frame needed) by a CALLx 
instruction.

Cray Research systems have both, certainly in the YMP and C90, possibly
earlier.

Bob Supnik	>Supnik@human.enet.dec.com
		>All opinions expressed are those of a hardline microcoder
		>and do not reflect those of Digital Equipment Corporation
